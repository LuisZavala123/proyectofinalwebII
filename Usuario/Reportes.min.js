var tb, tabla = null, con = 0; function otro() { sessionStorage.setItem("indx", "5"), location.href = "index.html" } function recargarDatos(t) { tb.fnClearTable(), tb.fnAddData(t) } function cargarDatos(t) { tb = $("#grvLista").dataTable({ data: t, columnDefs: [{ width: "15%", targets: [0] }, { width: "25%", targets: [1] }, { width: "20%", targets: [2] }, { width: "20%", targets: [3] }], columns: [{ title: "Nombre", data: "Nombre" }, { title: "Producto", data: "Tipo" }, { title: "Tipo", data: "Cantidad" }, { title: "cantidad", data: "Total" }], fnInitComplete: function (t, a) { var e = $(this).children("thead").children("tr").clone(), n = $("<tfoot/>").append(e).css("display", "table-header-group"); $(this).children("thead").after(n), $(e).children().each(function () { $(this).prop("class", null) }), $(e).children("th").each(function () { var t = $(this).text(); $(this).html('<input type="text" class="filtro form-control input-sm" style = "width:90%;" placeholder = "Buscar ' + t + '" /> ') }); var o = this; o.api().columns().eq(0).each(function (t) { $("#grvLista tfoot th:eq(" + t + ") input").on("keyup change", function () { o.api().column(t).search(this.value).draw() }), $("input", o.api().column(t).footer()).on("click", function (t) { t.stopPropagation() }) }) } }) } $("#contenido_contenido_btnGenerar").click(function (t) { t.preventDefault(); let a = $("#Fecha").val(); $.ajax({ url: "WS/WSVenta.asmx/GetallDetalles", data: '{ "fecha":"' + a + '"}', contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (t) { console.log(JSON.parse(t.d)), con < 1 ? (cargarDatos(JSON.parse(t.d)), con += 1) : recargarDatos(JSON.parse(t.d)) }, error: function (t) { console.log(t) } }) });