function eliminar(t) { t.preventDefault, $.ajax({ url: "WS/WSVenta.asmx/quitarDetalle", data: '{ "id":"' + t + '"}', contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (t) { $("#grvLista tbody").remove(), $("#grvLista tr").remove(), $("#grvLista td").remove(); let o, n = $("#grvLista"), e = $("<thead/>").append("<tr><th>Producto</th><th>Cantidad</th><th>Total</th><td></td>"); $(n).append(e), $(n).append("<tbody/>"); let a = 0; for (var d = 0; d < t.d.length; d++) { a += t.d[d].total, o = document.createElement("tr"); let e = "<td>" + t.d[d].Tipo + "</td><td>" + t.d[d].cantidad + "</td><td>" + t.d[d].total + '</td><td><button type="button" OnClick="eliminar(' + t.d[d].producto + ')" class="btn btn-danger">Eliminar</button></td>'; o.innerHTML = e, $(n).children("tbody").append(o) } $("#contenido_contenido_lbltotal").html(a), $("#grvLista").DataTable(), console.log(t) }, error: function (t) { console.log(t) } }) } $(document).ready(function nombres(e) { e.preventDefault, $.ajax({ url: "WS/WSArticulos.asmx/GetNombres", data: {}, contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (data) { var models = "string" == typeof data.d ? eval("(" + data.d + ") ") : data.d; $("#contenido_contenido_CboxProducto").get(0).options.length = 0; for (var i = 0; i < models.length; i++) { var val = models[i]; $("#contenido_contenido_CboxProducto").get(0).options[$("#contenido_contenido_CboxProducto").get(0).options.length] = new Option(val) } console.log(data) }, error: function (t) { console.log(t) } }) }), $(document).ready(function () { $("#contenido_contenido_btnAgregar").click(function (t) { t.preventDefault(); var o = $("#contenido_contenido_CboxProducto").val(), n = $("#contenido_contenido_txtCantidad").val(); $.ajax({ url: "WS/WSVenta.asmx/detalle", data: '{ "producto":"' + o + '", "Cantidad": "' + n + '"}', contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (t) { $("#grvLista tbody").remove(), $("#grvLista tr").remove(), $("#grvLista td").remove(); let o, n = $("#grvLista"), e = $("<thead/>").append("<tr><th>Producto</th><th>Cantidad</th><th>Total</th><td></td>"); $(n).append(e), $(n).append("<tbody/>"); let a = 0; for (var d = 0; d < t.d.length; d++) { a += t.d[d].total, o = document.createElement("tr"); let e = "<td>" + t.d[d].Tipo + "</td><td>" + t.d[d].cantidad + "</td><td>" + t.d[d].total + '</td><td><button type="button" OnClick="eliminar(' + t.d[d].producto + ')" class="btn btn-danger">Eliminar</button></td>'; o.innerHTML = e, $(n).children("tbody").append(o) } $("#contenido_contenido_lbltotal").html(a), $("#grvLista").DataTable(), console.log(t) }, error: function (t) { $("#mensaje").html('<button type="button" class="close" data-dismiss="alert" >&times;</button><strong > revise los datos </strong >'), console.log(t) } }) }) }), $(document).ready(function () { $("#contenido_contenido_btnAceptar").click(function (t) { t.preventDefault(); var o = $("#contenido_contenido_txtDescripcion").val(), n = $("#contenido_contenido_lbltotal").html(); $.ajax({ url: "WS/WSVenta.asmx/Agregar", data: '{"Total":"' + n + '", "Descripcion": "' + o + '"}', contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (t) { sessionStorage.setItem("indx", null), location.href = "index.html", console.log(t) }, error: function (t) { $("#mensaje").html('<button type="button" class="close" data-dismiss="alert" >&times;</button><strong > a acurrido un error </strong >'), console.log(t) } }) }) });