let nom = 0, cos = 0; var expr = /^[0-9]+\.[0-9]?[0-9]$/, exprn = /^[A-ZÁÉÍÓÚ][a-záéíúó]+$/, ready = 0, mensj = ""; $(document).ready(function () { $("#frm").validate({ rules: { ctl00$ctl00$contenido$contenido$txtCosto: { required: !0, step: .01 }, ctl00$ctl00$contenido$contenido$txtNombre: { required: !0, lettersonly: !0, minlength: 2 } }, messages: { ctl00$ctl00$contenido$contenido$txtCosto: { required: "Por favor, ingrese un costo", step: "Por favor, ingrese costo valido" }, ctl00$ctl00$contenido$contenido$txtNombre: { required: "Por favor, ingrese un nombre", lettersonly: "Por favor, ingrese nombre valido", minlength: "Por favor, ingrese un nombre real" } } }), $("#contenido_contenido_btnAceptar").click(function (o) { o.preventDefault(); var e = $("#contenido_contenido_txtNombre").val(), t = $("#contenido_contenido_txtCosto").val(), n = $("#contenido_contenido_txtDescripcion").val(), r = $("#contenido_contenido_CboxTipo").val(); mensj = "", exprn.test(e) ? (ready += 1, nom = 0) : (ready = 0, nom = 1, mensj += "Nombre, "), expr.test(t) ? (ready += 1, cos = 0) : (ready = 0, cos = 1, mensj += "Costo"), console.log(ready), 2 == ready ? $.ajax({ url: "WS/WSArticulos.asmx/Agregar", data: '{ "nom":"' + e + '", "costo":"' + t + '", "Descripcion":"' + n + '", "Tipo": "' + r + '" }', contentType: "application/json; utf-8", dataType: "json", type: "POST", success: function (o) { sessionStorage.setItem("indx", null), sessionStorage.setItem("accion", "Producto"), location.href = "index.html" }, error: function (o) { $("#mensaje").html('<button type="button" class="close" data-dismiss="alert" >&times;</button><strong > a acurrido un error </strong >'), $("#mensaje").show(), console.log(o) } }) : (ready = 0, $("#mensaje").html('<button type="button" class="close" data-dismiss="alert" >&times;</button><strong > Verifique los datos en: </strong >' + mensj), $("#mensaje").show(), console.log("Verifique Datos")) }) });